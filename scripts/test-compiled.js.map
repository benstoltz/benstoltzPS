{"version":3,"sources":["test.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,MAAM,GAAG,YAAW;;AAEvB,QAAI,UAAU,GAAG,EAAE,CAAC,UAAU,CAAC;;AAE/B,QAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;;AAEjD,QAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;;AAEjD,QAAI,UAAU,GAAG,UAAU,CAAC,SAAS,CAAC,OAAO,EAAM,UAAU,CAAC,CAAC;;AAE/D,QAAI,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AAC3D,QAAI,kBAAkB,GAAG,UAAU,CAAC,SAAS,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;;;;AAKrE,aAAS,yBAAyB,CAAC,IAAI,EAAE;AACrC,eAAO,UAAU,CAAC,MAAM,CAAC,SAAS,OAAO,CAAC,UAAU,EAAE;AAClD,gBAAI,SAAS,GAAG,KAAK,CAAC;;AAEtB,gBAAI,GAAG,GAAG,yEAAyE,GAAG,kBAAkB,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC;;AAE/H,aAAC,CAAC,OAAO,CAAC,GAAG,EAAE,UAAS,IAAI,EAAC;AACzB,oBAAI,CAAC,SAAS,EAAE;AACZ,8BAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3B,8BAAU,CAAC,WAAW,EAAE,CAAC;iBAC5B;aACJ,CAAC,CAAC;;AAEH,mBAAO,SAAS,OAAO,GAAG;AACtB,yBAAS,GAAG,IAAI,CAAC;aACpB,CAAC;SACL,CAAC,CAAC;KACN;;AAED,QAAI,eAAe,GAAG,kBAAkB,CAAC,QAAQ,CAC7C,SAAS,MAAM,CAAC,CAAC,EAAE;AACf,gBAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;KACjE,CAAC,CAAC;;AAEP,QAAI,gBAAgB,GAChB,eAAe,CACX,GAAG,CAAC,YAAW;AACX,YAAI,WAAW,GAAG,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE,OAAO,CAAC,CAAC;AACxF,YAAI,gBAAgB,GAChB,WAAW,CAAC,QAAQ,CAAC,YAAW;AAC5B,oBAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SAChE,CAAC,CAAC;AACP,eAAO,UAAU,CACb,QAAQ,CAAC,EAAE,CAAC,CACZ,GAAG,CAAC,UAAS,GAAG,EAAE;AACd,mBAAO,OAAO,CAAC,KAAK,CAAC;SACxB,CAAC,CACF,oBAAoB,EAAE,CACtB,GAAG,CAAC,UAAS,MAAM,EAAC;;AAEhB,mBAAO,yBAAyB,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACrD,CAAC,CAAC,YAAY,EAAE,CACjB,SAAS,CAAC,gBAAgB,CAAC,CAAA;KAClC,CAAC,CAAC,YAAY,EAAE,CAAC;;AAE1B,oBAAgB,CAAC,OAAO,CACpB,UAAS,SAAS,EAAE;AAChB,eAAO,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;KAC7C,EACD,UAAS,KAAK,EAAC;AACX,eAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KACtB,CAAC,CAAC;;AAEP,6BAAyB,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAS,OAAO,EAAC;AAAC,eAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;KAAE,CAAC,CAAC;CAG1F,CAAA","file":"test-compiled.js","sourcesContent":["window.onload = function() {\r\n\r\n    var Observable = Rx.Observable;\r\n\r\n    var textbox = document.getElementById('textbox');\r\n\r\n    var results = document.getElementById('results');\r\n\r\n    var keypresses = Observable.fromEvent(textbox,     'keypress');\r\n\r\n    var searchButton = document.getElementById('searchButton');\r\n    var searchButtonClicks = Observable.fromEvent(searchButton, 'click');\r\n\r\n// keypresses.forEach(e => console.log(e.keyCode));\r\n\r\n\r\n    function getWikipediaSearchResults(term) {\r\n        return Observable.create(function forEach(observable) {\r\n            var cancelled = false;\r\n\r\n            var url = \"http://en.wikipedia.org/w/api.php?action=opensearch&format=json&search=\" + encodeURIComponent(term) + '&callback=?';\r\n\r\n            $.getJSON(url, function(data){\r\n                if (!cancelled) {\r\n                    observable.onNext(data[1]);\r\n                    observable.onCompleted();\r\n                }\r\n            });\r\n\r\n            return function dispose() {\r\n                cancelled = true;\r\n            };\r\n        });\r\n    }\r\n\r\n    var searchFormOpens = searchButtonClicks.doAction(\r\n        function onNext(v) {\r\n            document.getElementById('searchForm').style.display = \"block\";\r\n        });\r\n\r\n    var searchResultSets =\r\n        searchFormOpens.\r\n            map(function() {\r\n                var closeClicks = Observable.fromEvent(document.getElementById(\"closeButton\"), 'click');\r\n                var searchFormCloses =\r\n                    closeClicks.doAction(function() {\r\n                        document.getElementById('searchform').style.display = \"none\";\r\n                    });\r\n                return keypresses.\r\n                    throttle(20).\r\n                    map(function(key) {\r\n                        return textbox.value;\r\n                    }).\r\n                    distinctUntilChanged().\r\n                    map(function(search){\r\n\r\n                        return getWikipediaSearchResults(search).retry(3);\r\n                    }).switchLatest().\r\n                    takeUntil(searchFormCloses)\r\n            }).switchLatest();\r\n\r\n    searchResultSets.forEach(\r\n        function(resultSet) {\r\n            results.value = JSON.stringify(resultSet);\r\n        },\r\n        function(error){\r\n            console.log(error);\r\n        });\r\n\r\n    getWikipediaSearchResults('France').forEach(function(results){console.log(results); });\r\n\r\n\r\n}"]}